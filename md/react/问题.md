## 函数组件请求数据

问题：在函数组件中请求数据，API.UserListAll 被一直不停的调用

```js
export default function UserPower() {
  const [tableData, setTableData] = useState([]);
  window.API.UserListAll({
    offset: 0,
    count: 100,
  }).then((users) => {
    setTableData(users);
  });

  return <>{tableData}</>;
}
```

自我猜测：setTableData 改变了渲染用到的数据，因此再次触发 UserPower render，无限循环。
思考: 怎么在函数组件中只请求第一次，函数组件没有生命周期，难道只能用 class 组件来写吗

解决方法：

方案一：使用 useEffect

```js
useEffect(() => {
  setLoading(true);
  (async () => {
    const res = await window.API.UserListAll<API.RequestData, API.UserInfo[]>({
      offset: 0,
      count: 100,
    });
    setTableData(data);
    setLoading(false);
  })();
}, []);
```

## 子组件的 Modal 被父组件的表格按键打开
